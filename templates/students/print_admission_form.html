<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admission Form - {{ student.first_name }}</title>
    <style>
        body { font-family: 'Times New Roman', serif; background: #eee; margin: 0; padding: 20px; }
        
        /* A4 Page Styling */
        .a4-page {
            width: 210mm;
            min-height: 297mm;
            background: #fff;
            margin: 0 auto;
            padding: 15mm;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            position: relative;
            box-sizing: border-box;
        }

        /* Header */
        .header { text-align: center; border-bottom: 2px solid #000; padding-bottom: 10px; margin-bottom: 20px; }
        .school-name { font-size: 28px; font-weight: bold; text-transform: uppercase; margin: 5px 0; }
        .school-address { font-size: 14px; margin: 0; }
        .form-title { 
            text-align: center; background: #000; color: #fff; 
            display: inline-block; padding: 5px 20px; 
            font-weight: bold; text-transform: uppercase; border-radius: 20px;
            margin: 10px 0 20px 0;
        }

        /* Photo & Basic Info */
        .top-section { display: flex; justify-content: space-between; margin-bottom: 20px; }
        .photo-box {
            width: 130px; height: 150px; border: 1px solid #000;
            display: flex; align-items: center; justify-content: center;
        }
        .photo-box img { width: 100%; height: 100%; object-fit: cover; }

        /* Tables */
        table { width: 100%; border-collapse: collapse; margin-bottom: 15px; }
        th, td { border: 1px solid #000; padding: 8px; font-size: 14px; text-align: left; }
        th { background-color: #f0f0f0; width: 30%; font-weight: bold; }

        /* Declaration */
        .declaration { font-size: 12px; text-align: justify; margin-top: 20px; border: 1px solid #000; padding: 10px; }
        
        /* Signatures */
        .signatures { margin-top: 50px; display: flex; justify-content: space-between; text-align: center; }
        .sign-line { border-top: 1px solid #000; width: 150px; margin-top: 40px; padding-top: 5px; font-weight: bold; }

        /* Print Settings */
        @media print {
            body { background: none; padding: 0; }
            .a4-page { box-shadow: none; margin: 0; width: 100%; border: none; }
            .no-print { display: none !important; }
            @page { margin: 0; }
        }
    </style>
</head>
<body>

    <div class="no-print" style="text-align: center; margin-bottom: 10px;">
        <button onclick="window.print()" style="padding: 10px 20px; background: blue; color: white; font-size: 16px; cursor: pointer;">üñ®Ô∏è Print Application Form</button>
    </div>

    <div class="a4-page">
        <div class="header">
            {% if student.school.logo %}
                <img src="{{ student.school.logo.url }}" height="60" style="margin-bottom: 5px;">
            {% endif %}
            <div class="school-name">{{ student.school.name }}</div>
            <div class="school-address">{{ student.school.address }} | Phone: {{ student.school.phone }}</div>
        </div>

        <div style="text-align: center;">
            <div class="form-title">Student Admission Form</div>
        </div>

        <div class="top-section">
            <div style="width: 70%;">
                <p><strong>Admission No:</strong> {{ student.admission_no }}</p>
                <p><strong>Admission Date:</strong> {{ student.admission_date }}</p>
                <p><strong>Class Admitted To:</strong> {{ student.current_class.name }} ({{ student.section.name }})</p>
                <p><strong>Roll Number:</strong> {{ student.roll_number|default:"Not Assigned" }}</p>
            </div>
            <div class="photo-box">
                {% if student.photo %}
                    <img src="{{ student.photo.url }}">
                {% else %}
                    <span>Paste Photo Here</span>
                {% endif %}
            </div>
        </div>

        <h4>1. Personal Information</h4>
        <table>
            <tr>
                <th>Student Name</th>
                <td style="text-transform: uppercase; font-weight: bold;">{{ student.first_name }} {{ student.last_name }}</td>
            </tr>
            <tr>
                <th>Date of Birth</th>
                <td>{{ student.dob }}</td>
            </tr>
            <tr>
                <th>Gender</th>
                <td>{{ student.get_gender_display }}</td>
            </tr>
            <tr>
                <th>Blood Group</th>
                <td>{{ student.blood_group|default:"-" }}</td>
            </tr>
            <tr>
                <th>Religion & Category</th>
                <td>{{ student.religion|default:"-" }} / {{ student.category|default:"-" }}</td>
            </tr>
            <tr>
                <th>Aadhar Card No</th>
                <td>{{ student.aadhar_no|default:"-" }}</td>
            </tr>
        </table>

        <h4>2. Family Information</h4>
        <table>
            <tr>
                <th>Father's Name</th>
                <td>{{ student.father_name }}</td>
                <th>Mother's Name</th>
                <td>{{ student.mother_name|default:"-" }}</td>
            </tr>
            <tr>
                <th>Father's Occupation</th>
                <td>{{ student.father_occupation|default:"-" }}</td>
                <th>Mobile Number</th>
                <td>{{ student.father_mobile }}</td>
            </tr>
            <tr>
                <th>Residential Address</th>
                <td colspan="3">{{ student.address }}</td>
            </tr>
        </table>

        <h4>3. Previous Education Details</h4>
        <table>
            <tr>
                <th>Previous School Name</th>
                <td colspan="3">{{ student.previous_school|default:"N/A" }}</td>
            </tr>
        </table>

        <div class="declaration">
            <strong>Declaration by Parent/Guardian:</strong>
            <br>
            I hereby declare that the information provided above is true and correct to the best of my knowledge. I agree to abide by the rules and regulations of the school. I understand that any false information may lead to the cancellation of admission.
        </div>

        <div style="border: 1px dashed #000; padding: 10px; margin-top: 15px; background: #fafafa;">
            <strong>For Office Use Only:</strong>
            <br><br>
            <span style="margin-right: 30px;">Checked By: _________________</span>
            <span>Fee Paid: _________________</span>
            <span style="float: right;">Date: _________________</span>
        </div>

        <div class="signatures">
            <div class="sign-line">Class Teacher</div>
            <div class="sign-line">Parent's Signature</div>
            <div class="sign-line">Principal</div>
        </div>
    </div>

</body>
</html>